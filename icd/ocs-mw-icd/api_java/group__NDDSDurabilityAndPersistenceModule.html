<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTI Data Distribution Service Java API: Durability and Persistence</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>Durability and Persistence<br>
<small>
[<a class="el" href="group__NDDSApiModule.html">RTI Data Distribution Service API Reference</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
RTI Data Distribution Service offers the following mechanisms for achieving durability and persistence:<p>
<ul>
<li><a class="el" href="group__NDDSDurabilityAndPersistenceModule.html#NDDSDurableWriterHistory">Durable Writer History</a></li>
</ul>
<ul>
<li><a class="el" href="group__NDDSDurabilityAndPersistenceModule.html#NDDSDurableReaderState">Durable Reader State</a></li>
</ul>
<ul>
<li><a class="el" href="group__NDDSDurabilityAndPersistenceModule.html#NDDSDataDurability">Data Durability</a></li>
</ul>
To use any of these features, you need a relational database, which is not included with RTI Data Distribution Service. Supported databases are listed in the Release Notes.<p>
These three features can be used separately or in combination.<p>
<br>
<h2><a class="anchor" name="NDDSDurableWriterHistory">
Durable Writer History</a></h2>
This feature allows a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> to locally persist its local history cache so that it can survive shutdowns, crashes and restarts. When an application restarts, each <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> that has been configured to have durable writer history automatically loads all the data in its history cache from disk and can carry on sending data as if it had never stopped executing. To the rest of the system, it will appear as if the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> had been temporarily disconnected from the network and then reappeared.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__NDDSDurabilityAndPersistenceModule.html#NDDSDurableWriterConfiguration">Configuring Durable Writer History</a></dd></dl>
<h2><a class="anchor" name="NDDSDurableReaderState">
Durable Reader State</a></h2>
This feature allows a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> to locally persists its state and remember the data it has already received. When an application restarts, each <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> that has been configured to have durable reader state automatically loads its state from disk and can carry on receiving data as if it had never stopped executing. Data that had already been received by the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> before the restart will be suppressed so it is not sent over the network.<h2><a class="anchor" name="NDDSDataDurability">
Data Durability</a></h2>
This feature is a full implementation of the OMG DDS Persistence Profile. The <a class="el" href="group__DDSDurabilityQosModule.html">DURABILITY</a> QoS lets an application configure a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> such that the information written by the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> survives beyond the lifetime of the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a>. In this manner, a late-joining <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> can subscribe and receive the information even after the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> application is no longer executing. To use this feature, you need RTI Persistence Service -- an optional product that can be purchased separately.<p>
<br>
<h2><a class="anchor" name="NDDSVirtualGuid">
Durability and Persistence Based on Virtual GUID</a></h2>
Every modification to the global dataspace made by a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> is identified by a pair (virtual GUID, sequence number).<p>
<ul>
<li>
The virtual GUID (Global Unique Identifier) is a 16-byte character identifier associated with a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> or <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a>; it is used to uniquely identify this entity in the global data space. </li>
<li>
The sequence number is a 64-bit identifier that identifies changes published by a specific <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a>. </li>
</ul>
<p>
Several <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> entities can be configured with the same virtual GUID. If each of these <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> entities publishes a sample with sequence number '0', the sample will only be received once by the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> entities subscribing to the content published by the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> entities.<p>
<div align="center">
<img src="NDDSGlobalDataspace.png" alt="NDDSGlobalDataspace.png">
<p><strong>Global Dataspace Changes</strong></p></div>
<p>
RTI Data Distribution Service also uses the virtual GUID (Global Unique Identifier) to associate a persisted state (state in permanent storage) to the corresponding DDS entity.<p>
For example, the history of a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> will be persisted in a database table with a name generated from the virtual GUID of the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a>. If the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> is restarted, it must have associated the same virtual GUID to restore its previous history.<p>
Likewise, the state of a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> will be persisted in a database table whose name is generated from the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> virtual GUID<p>
<div align="center">
<img src="NDDSVirtualGUID.png" alt="NDDSVirtualGUID.png">
<p><strong>History/State Persistence Based on the Virtual GUID</strong></p></div>
 A <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a>'s virtual GUID can be configured using <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DataWriterProtocolQosPolicy.html#o0">com.rti.dds.infrastructure.DataWriterProtocolQosPolicy.virtual_guid</a>. Similarly, a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a>'s virtual GUID can be configured using <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DataReaderProtocolQosPolicy.html#o0">com.rti.dds.infrastructure.DataReaderProtocolQosPolicy.virtual_guid</a>.<p>
The builtin.PublicationBuiltinTopicData and builtin.SubscriptionBuiltinTopicData structures include the virtual GUID associated with the discovered publication or subscription.<p>
Refer to the User's Manual for additional use cases.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DataWriterProtocolQosPolicy.html#o0">com.rti.dds.infrastructure.DataWriterProtocolQosPolicy.virtual_guid</a> <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DataReaderProtocolQosPolicy.html#o0">com.rti.dds.infrastructure.DataReaderProtocolQosPolicy.virtual_guid</a>.</dd></dl>
<br>
<h2><a class="anchor" name="NDDSDurableWriterConfiguration">
Configuring Durable Writer History</a></h2>
To configure a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> to have durable writer history, use the <a class="el" href="group__DDSPropertyQosModule.html">PROPERTY</a> QoS policy associated with the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> or the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a>.<p>
Properties defined for the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a> will be applied to all the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> objects belonging to the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a>, unless the property is overwritten by the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1PropertyQosPolicy.html">com.rti.dds.infrastructure.PropertyQosPolicy</a></dd></dl>
The following table lists the supported durable writer history properties.<p>
<center> <table border="1" cellspacing="3" cellpadding="3">
<caption align="bottom"><em>Durable Writer History Properties </em></caption>
<tr>
<th><b> Property </b>  </th><th><b> Description </b>   </th></tr>
<tr>
<td>dds.data_writer.history.plugin_name  </td><td>Must be set to "dds.data_writer.history.odbc_plugin.builtin" to enable durable writer history in the DataWriter. This property is required.  </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.dsn  </td><td>The ODBC DSN (Data Source Name) associated with the database where the writer history must be persisted. This property is required.  </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.driver  </td><td>This property tells RTI Data Distribution Service which ODBC driver to load. If the property is not specified, RTI Data Distribution Service will try to use the standard ODBC driver manager library (UnixOdbc on UNIX/Linux systems, the Windows ODBC driver manager on Windows systems).   </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.username  </td><td>Configures the username used to connect to the database.  </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.password  </td><td>Configures the password used to connect to the database.  </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.shared  </td><td>When set to 0 (false), this configures a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> to create its own database connection. When set to 1 (true), RTI Data Distribution Service will create a single connection per DSN that will be shared across DataWriters. Setting it to 1 <em>decreases</em> concurrency. Default: 0 (false)   </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.instance_cache_max_size  </td><td>These properties configure the resource limits associated with the ODBC writer history caches. To minimize the number of accesses to the database, RTI Data Distribution Service uses two caches, one for samples and one for instances. The initial and maximum sizes of these caches are configured using these properties. The resource limits initial_instances, max_instances, initial_samples, max_samples and max_samples_per_instance in the <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1ResourceLimitsQosPolicy.html">com.rti.dds.infrastructure.ResourceLimitsQosPolicy</a> are used to configure the maximum number of samples and instances that can be stored in the relational database. Default: 64  </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.instance_cache_init_size  </td><td>See description above. Default: 32   </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.instance_sample_max_size  </td><td>See description above. Default: 64   </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.instance_sample_init_size  </td><td>See description above. Default: 32   </td></tr>
<tr>
<td>dds.data_writer.history.odbc_plugin.restore  </td><td>This property indicates whether or not the persisted writer history must be restored once the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> is restarted. If the value is 0, the content of the database associated with the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> being restarted will be deleted. If the value is 1, the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> will restore its previous state from the database content. Default: 1   </td></tr>
</table>
</center><h2><a class="anchor" name="NDDSDurableReaderConfiguration">
Configuring Durable Reader State</a></h2>
To configure a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> with durable reader state, use the <a class="el" href="group__DDSPropertyQosModule.html">PROPERTY</a> QoS policy associated with the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> or <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a>.<p>
A property defined in the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a> will be applicable to all the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> belonging to the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a> unless it is overwritten by the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1PropertyQosPolicy.html">com.rti.dds.infrastructure.PropertyQosPolicy</a></dd></dl>
The following table lists the supported durable reader state properties.<p>
<center> <table border="1" cellspacing="3" cellpadding="3">
<caption align="bottom"><em>Durable Reader State Properties </em></caption>
<tr>
<th><b> Property </b>  </th><th><b> Description </b>   </th></tr>
<tr>
<td>dds.data_reader.state.odbc.dsn </td><td>The ODBC DSN (Data Source Name) associated with the database where the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> state must be persisted. This property is required.  </td></tr>
<tr>
<td>dds.data_reader.state.filter_redundant_samples </td><td>To enable durable reader state, this property must be set to "1". Otherwise, the reader state will not be kept and/or persisted. When the reader state is not maintained, RTI Data Distribution Service does not filter duplicate samples that may be coming from the same virtual writer. By default, this property is set to "1" when either of these are true: (a) the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a>’s Durability kind is <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DurabilityQosPolicyKind.html#s3">com.rti.dds.infrastructure.DurabilityQosPolicyKind.PERSISTENT_DURABILITY_QOS</a> or <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DurabilityQosPolicyKind.html#s2">com.rti.dds.infrastructure.DurabilityQosPolicyKind.TRANSIENT_DURABILITY_QOS</a> <br>
 (b) dds.data_reader.state.odbc.dsn is configured.  </td></tr>
<tr>
<td>dds.data_reader.state.odbc.driver  </td><td>This property is used to indicate which ODBC driver to load. If the property is not specified, RTI Data Distribution Service will try to use the standard ODBC driver manager library (UnixOdbc on UNIX/Linux systems, the Windows ODBC driver manager on Windows systems).  </td></tr>
<tr>
<td>dds.data_reader.state.odbc.username  </td><td>This property configures the username used to connect to the database.  </td></tr>
<tr>
<td>dds.data_reader.state.odbc.password  </td><td>This property configures the password used to connect to the database.  </td></tr>
<tr>
<td>dds.data_reader.state.restore </td><td>This property indicates if the persisted <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> state must be restored or not once the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> is restarted. If this property is 0, the previous state will be deleted from the database. If it is 1, the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> will restore its previous state from the database content. Default: 1   </td></tr>
<tr>
<td>dds.data_reader.state.persistence_service.request_depth </td><td>This property indicates the number of most recent historical samples that the persisted <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a> requests to be sent by a persistent service <a class="el" href="interfacecom_1_1rti_1_1dds_1_1publication_1_1DataWriter.html">com.rti.dds.publication.DataWriter</a> upon start-up of the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1subscription_1_1DataReader.html">com.rti.dds.subscription.DataReader</a>. Default: 0   </td></tr>
</table>
</center><p>
<br>
 <br>
<h2><a class="anchor" name="NDDSDataDurabilityConfiguration">
Configuring Data Durability</a></h2>
RTI Data Distribution Service implements <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DurabilityQosPolicyKind.html#s2">com.rti.dds.infrastructure.DurabilityQosPolicyKind.TRANSIENT_DURABILITY_QOS</a> and <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DurabilityQosPolicyKind.html#s3">com.rti.dds.infrastructure.DurabilityQosPolicyKind.PERSISTENT_DURABILITY_QOS</a> durability using RTI Persistence Service, available for purchase as a separate RTI product.<p>
For more information on RTI Persistence Service, refer to the User's Manual, or the RTI Persistence Service online documentation.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__DDSDurabilityQosModule.html">DURABILITY</a> </dd></dl>
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Data Distribution Service Java API Version 4.2e (General Access Release)</A>
Copyright &copy; 4 Dec 2007 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
